<div class="modal-overlay" (click)="close.emit()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Send SMS to {{ student?.student_name || "" }}'s Parent</h2>
      <button class="close-btn" (click)="close.emit()">&times;</button>
    </div>
    <div class="modal-body">
      <div class="recipient-info">
        <p><strong>Student:</strong> {{ student?.student_name || "" }}</p>
        <p>
          <strong>Parent's Phone:</strong> {{ student?.parent_phone_sms || "" }}
        </p>
      </div>
      <div
        class="price-tag"
        style="
          background: #e3f6e8;
          color: #1a7f37;
          padding: 6px 16px;
          border-radius: 16px;
          display: inline-block;
          font-weight: 600;
          margin-bottom: 12px;
        "
      >
        UGX 50<span style="font-size: 0.9em">/sms</span>
      </div>
      <div class="form-group">
        <label for="message">Message</label>
        <textarea
          id="message"
          class="form-control"
          [ngModel]="message"
          (ngModelChange)="onMessageChange($event)"
          rows="5"
          placeholder="Type your message here..."
        >
        </textarea>
        <div class="char-counter">
          <span>{{ characterCount }} / 160 characters</span>
          <span
            >(Consumes {{ smsCreditsConsumed }} SMS credit<span
              *ngIf="smsCreditsConsumed > 1"
              >s</span
            >)</span
          >
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="close.emit()">Cancel</button>
      <button class="btn btn-primary" (click)="sendSms()" [disabled]="!message">
        Send SMS
      </button>
    </div>
  </div>
</div>
