<div class="page-container">
  <!-- Purchase form (shown when purchase clicked) -->
  <div class="purchase-form" *ngIf="showPurchase">
    <div class="purchase-card">
      <h3>Confirm Purchase</h3>
      <form (ngSubmit)="confirmPurchase()">
        <div class="field">
          <label>School Name</label>
          <input
            type="text"
            [(ngModel)]="form.schoolName"
            name="schoolName"
            readonly
          />
        </div>
        <div class="field">
          <label>Contact Phone</label>
          <input
            type="text"
            [(ngModel)]="form.contactPhone"
            name="contactPhone"
            readonly
          />
        </div>
        <div class="field">
          <label>Selected Package</label>
          <input
            type="text"
            [(ngModel)]="form.selectedPackage"
            name="selectedPackage"
            readonly
          />
        </div>
        <div class="field">
          <label>Price</label>
          <input
            type="text"
            [value]="selectedPrice | currency : 'UGX' : true : '1.0-0'"
            readonly
          />
        </div>
        <div class="field">
          <label>Number of SMS</label>
          <input
            type="number"
            [(ngModel)]="form.numberOfSms"
            name="numberOfSms"
            readonly
          />
        </div>

        <div class="payment-methods">
          <h4>Payment Methods</h4>
          <ol>
            <li>
              <strong>Airtel Merchant Code</strong><br />
              Dial <code>*185*9#</code> then enter <code>6898018</code> (G-REALM
              STUDIO)
            </li>
            <li>
              <strong>Housing Finance Bank</strong><br />
              1210000150725 - G-REALM STUDIO
            </li>
          </ol>
        </div>

        <div class="actions">
          <button type="submit" class="order-btn">Order</button>
          <button type="button" class="cancel-btn" (click)="cancelPurchase()">
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>

  <div class="packages-container" *ngIf="!showPurchase">
    <div class="package-card">
      <h3>Pay-As-You-Go 1</h3>
      <p class="price">UGX 5,000</p>
      <p class="credits">100 SMS Credits</p>
      <p class="target">Ideal for Small/Testing</p>
      <button class="purchase-btn" (click)="purchasePackage('Pay-As-You-Go 1')">
        Purchase
      </button>
    </div>

    <div class="package-card">
      <h3>Pay-As-You-Go 2</h3>
      <p class="price">UGX 20,000</p>
      <p class="credits">410 SMS Credits</p>
      <p class="target">Ideal for Small/Steady Use</p>
      <button class="purchase-btn" (click)="purchasePackage('Pay-As-You-Go 2')">
        Purchase
      </button>
    </div>

    <div class="package-card popular">
      <h3>Premium 1 (Volume)</h3>
      <p class="price">UGX 500,000</p>
      <p class="credits">10,500 SMS Credits</p>
      <p class="target">Ideal for Large Schools</p>
      <button class="purchase-btn" (click)="purchasePackage('Premium 1')">
        Purchase
      </button>
    </div>

    <div class="package-card">
      <h3>Custom (Volume)</h3>
      <p class="price">UGX 50 /sms</p>
      <p class="credits">Custom Credits</p>
      <p class="target">Ideal for Largest Schools</p>
      <button class="purchase-btn" (click)="purchasePackage('Custom')">
        Purchase
      </button>
    </div>
  </div>
  <!-- end packages-container -->

  <!-- Custom amount modal -->
  <div class="custom-modal-backdrop" *ngIf="showCustomModal">
    <div class="custom-modal">
      <h3>Custom SMS Package</h3>
      <p class="muted">
        Enter the total amount you wish to spend. We'll show how many SMS
        credits that buys.
      </p>
      <div class="field">
        <label>Amount (UGX)</label>
        <input
          type="number"
          [(ngModel)]="customAmount"
          name="customAmount"
          min="0"
        />
      </div>
      <div class="sms-preview">
        <div class="sms-count">{{ computedSmsCount | number : "1.0-0" }}</div>
        <div class="sms-label">SMS Credits</div>
      </div>
      <div class="modal-actions">
        <button class="confirm-btn" (click)="confirmCustomAmount()">
          Confirm
        </button>
        <button class="cancel-btn" (click)="cancelCustom()">Cancel</button>
      </div>
    </div>
  </div>
</div>
